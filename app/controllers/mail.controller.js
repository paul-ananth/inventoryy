const sendGridMail = require("@sendgrid/mail");
sendGridMail.setApiKey(
  "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"
);

// Create and Save a new Tutorial
exports.create = (req, res) => {
  const body = "Inventory Contact Form";
  const mailBody = {
    to: "paulananth1219@gmail.com",
    from: "paulananth1219@gmail.com",
    subject: "Contact Form",
    text: "Contact",
    html: `<html lang=en xmlns=http://www.w3.org/1999/xhtml xmlns:o=urn:schemas-microsoft-com:office:office xmlns:v=urn:schemas-microsoft-com:vml><meta charset=utf-8><meta content="width=device-width"name=viewport><meta content="IE=edge"http-equiv=X-UA-Compatible><meta name=x-apple-disable-message-reformatting><title></title><link href="https://fonts.googleapis.com/css?family=Lato:300,400,700"rel=stylesheet><style>body,html{margin:0 auto!important;padding:0!important;height:100%!important;width:100%!important;background:#f1f1f1}*{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}div[style*="margin: 16px 0"]{margin:0!important}table,td{mso-table-lspace:0!important;mso-table-rspace:0!important}table{border-spacing:0!important;border-collapse:collapse!important;table-layout:fixed!important;margin:0 auto!important}img{-ms-interpolation-mode:bicubic}a{text-decoration:none}.aBn,.unstyle-auto-detected-links *,[x-apple-data-detectors]{border-bottom:0!important;cursor:default!important;color:inherit!important;text-decoration:none!important;font-size:inherit!important;font-family:inherit!important;font-weight:inherit!important;line-height:inherit!important}.a6S{display:none!important;opacity:.01!important}.im{color:inherit!important}img.g-img+div{display:none!important}@media only screen and (min-device-width:320px) and (max-device-width:374px){u~div .email-container{min-width:320px!important}}@media only screen and (min-device-width:375px) and (max-device-width:413px){u~div .email-container{min-width:375px!important}}@media only screen and (min-device-width:414px){u~div .email-container{min-width:414px!important}}</style><style>.primary{background:#30e3ca}.bg_white{background:#fff}.bg_light{background:#fafafa}.bg_black{background:#000}.bg_dark{background:rgba(0,0,0,.8)}.email-section{padding:2.5em}.btn{padding:10px 15px;display:inline-block}.btn.btn-primary{border-radius:5px;background:#30e3ca;color:#fff}.btn.btn-white{border-radius:5px;background:#fff;color:#000}.btn.btn-white-outline{border-radius:5px;background:0 0;border:1px solid #fff;color:#fff}.btn.btn-black-outline{border-radius:0;background:0 0;border:2px solid #000;color:#000;font-weight:700}h1,h2,h3,h4,h5,h6{font-family:Lato,sans-serif;color:#000;margin-top:0;font-weight:400}body{font-family:Lato,sans-serif;font-weight:400;font-size:15px;line-height:1.8;color:rgba(0,0,0,.4)}a{color:#30e3ca}.logo h1{margin:0}.logo h1 a{color:#30e3ca;font-size:24px;font-weight:700;font-family:Lato,sans-serif}.hero{position:relative;z-index:0}.hero .text{color:rgba(0,0,0,.3)}.hero .text h2{color:#000;font-size:40px;margin-bottom:0;font-weight:400;line-height:1.4}.hero .text h3{font-size:24px;font-weight:300}.hero .text h2 span{font-weight:600;color:#30e3ca}.heading-section h2{color:#000;font-size:28px;margin-top:0;line-height:1.4;font-weight:400}.heading-section .subheading{margin-bottom:20px!important;display:inline-block;font-size:13px;text-transform:uppercase;letter-spacing:2px;color:rgba(0,0,0,.4);position:relative}.heading-section .subheading::after{position:absolute;left:0;right:0;bottom:-10px;content:'';width:100%;height:2px;background:#30e3ca;margin:0 auto}.heading-section-white{color:rgba(255,255,255,.8)}.heading-section-white h2{font-family:line-height: 1;padding-bottom:0}.heading-section-white h2{color:#fff}.heading-section-white .subheading{margin-bottom:0;display:inline-block;font-size:13px;text-transform:uppercase;letter-spacing:2px;color:rgba(255,255,255,.4)}ul.social{padding:0}ul.social li{display:inline-block;margin-right:10px}.footer{border-top:1px solid rgba(0,0,0,.05);color:rgba(0,0,0,.5)}.footer .heading{color:#000;font-size:20px}.footer ul{margin:0;padding:0}.footer ul li{list-style:none;margin-bottom:10px}.footer ul li a{color:rgba(0,0,0,1)}</style><body style=margin:0;padding:0!important;mso-line-height-rule:exactly;background-color:#f1f1f1 width=100%><center style=width:100%;background-color:#f1f1f1><div style=display:none;font-size:1px;max-height:0;max-width:0;opacity:0;overflow:hidden;mso-hide:all;font-family:sans-serif></div><div style="max-width:600px;margin:0 auto"class=email-container><table border=0 cellpadding=0 cellspacing=0 role=presentation width=100% align=center style=margin:auto><tr><td class=bg_white style="padding:1em 2.5em 0 2.5em"valign=top><table border=0 cellpadding=0 cellspacing=0 role=presentation width=100%><tr><td class=logo style=text-align:center><h1><a>INVENTORY -TCE</a></h1></table><tr><td class="bg_white hero"style="padding:2em 0 4em 0"valign=middle><table><tr><td><div style="padding:0 2.5em;text-align:center"class=text><h5>Email : ${req.body.mail}</h5><h5>Mobile : ${req.body.mobile}</h5><h5>Name : ${req.body.name}</h5><p><strong>Message :</strong>${req.body.message}</div></table></table></div></center>`,
  };

  try {
    sendGridMail.send(mailBody);
    res.status(200).send({ message: "Test email sent successfully !" });
  } catch (error) {
    res.status(400).send({ message: "" });
    if (error.response) {
      console.error(error.response.body);
    }
  }
};
